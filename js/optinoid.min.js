function isEmail(i){var e=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return e.test(i)}!function(i){if("function"==typeof define&&define.amd)define(i);else if("object"==typeof exports)module.exports=i();else{var e=window.Cookies,t=window.Cookies=i();t.noConflict=function(){return window.Cookies=e,t}}}(function(){function i(){for(var i=0,e={};i<arguments.length;i++){var t=arguments[i];for(var o in t)e[o]=t[o]}return e}function e(t){function o(e,n,s){var a;if(arguments.length>1){if(s=i({path:"/"},o.defaults,s),"number"==typeof s.expires){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*s.expires),s.expires=d}try{a=JSON.stringify(n),/^[\{\[]/.test(a)&&(n=a)}catch(l){}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",n,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}e||(a={});for(var c=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,p=0;p<c.length;p++){var u=c[p].split("="),h=u[0].replace(r,decodeURIComponent),m=u.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=t&&t(m,h)||m.replace(r,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(l){}if(e===h){a=m;break}e||(a[h]=m)}catch(l){}}return a}return o.get=o.set=o,o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(e,t){o(e,"",i(t,{expires:-1}))},o.withConverter=e,o}return e()});var j=jQuery.noConflict(),Optinoid={isMobile:!1,el:null,type:"popup",win:null,cookies:[],init:function(){var i=this;this.cookies=Cookies.getJSON("optinoid-closed-optins"),this.win=j(window),window.matchMedia("(max-width: 768px)").matches&&(this.isMobile=!0),jQuery.post(optinoid.api_url,{id:optinoid.id,action:"load_optinoid",security:optinoid.nonce,mobile:this.isMobile,inline:!1,closed:"undefined"!=typeof this.cookies?this.cookies:null},function(e){j("#optinoid-placeholder").replaceWith(e),i.getOptins()})},events:function(){var i=this;j(document).on("click",".close-optin",function(e){i.close(!0),e.preventDefault()}),j(document).on("click",".optinoid-scroll",function(e){i.close(!0),e.preventDefault()}),j("#optinoid-overlay").click(function(e){e.target===this&&(i.close(!0),e.preventDefault())}),j(".optinoid-text").click(function(i){j("form",j(this).parent()).hasClass("active")?j("form",j(this).parent()).removeClass("active"):j("form",j(this).parent()).addClass("active")}),("welcomemat"==this.type||"welcomemat-fb"==this.type)&&(this.win.scroll(function(){j("#optinoid-welcome").hasClass("active")&&i.win.scrollTop()>i.win.height()&&i.close()}),this.win.resize(function(){j("#optinoid-welcome").height(i.win.height())}))},getOptins:function(){var i=this,e=this.isMobile?"mobile":"desktop";j(".optinoid-optin."+e).length&&j(".optinoid-optin."+e).each(function(){i.el=j(this),i.type=j(i.el).data("type");var e=j(i.el).data("id");return-1===j.inArray(e,i.cookies)?(i.formSubmit(),i.events(),i.open(),!1):void 0})},formSubmit:function(){var i=this;j(".optinoid-form").submit(function(e){0!==j("input[type=email]",this).val().length?(j("input[type=email]",this).removeClass("has-error"),j(this).closest(".optinoid-optin").append('<div class="preloader"><div class="circle"></div></div>'),jQuery.post(optinoid.api_url,j(this).serialize(),function(e){e.success&&e.success===!0&&(e.redirect===!0&&(window.location=e.url),i.close(!1))})):j("input[type=email]",this).addClass("has-error"),e.preventDefault()})},open:function(){var i=null,e=this;"popup"==this.type&&(i="#optinoid-overlay"),("welcomemat"==this.type||"welcomemat-fb"==this.type)&&(i="#optinoid-welcome"),"floating-bar"==this.type&&(i="#optinoid-floating-bar"),i&&j(i).delay(j(this.el).data("delay")).queue(function(){j(this).addClass("active").dequeue(),"#optinoid-welcome"==i&&j("body").addClass("optinoid-welcome-padding").css({"padding-top":e.win.height()}),"#optinoid-floating-bar"==i&&j(i).hasClass("optinoid-stick-top")&&j("body").addClass("optinoid-fb-padding").css("padding-top",j("#optinoid-floating-bar").outerHeight())}),j(this.el).delay(j(this.el).data("delay")).queue(function(){j(this).addClass("active").dequeue();var e=j(this).data();""!=e.btnColor&&j(".optinoid-button",this).css("background",e.btnColor),""!=e.btnTextColor&&j(".optinoid-button",this).css("color",e.btnTextColor),""!=e.bgColor&&j(".optinoid-container",this).css("background-color",e.bgColor),""!=e.textColor&&j(".optinoid-text",this).css("color",e.textColor),"#optinoid-welcome"==i&&(j(i).children(".content-over-split").length?j(i).append('<div class="optinoid-scroll split-screen"><i></i><i></i></div'):j(i).append('<div class="optinoid-scroll"><i></i><i></i></div')),""!=e.arrowColor&&j(".optinoid-scroll > i",j(i)).css("background",e.arrowColor)}),jQuery.post(optinoid.api_url,{id:j(this.el).data("id"),action:"view_optinoid",security:optinoid.nonce})},close:function(i){j("#optinoid-welcome, #optinoid-overlay").addClass("closing").delay(500).queue(function(){j(this).removeClass("active closing").dequeue()}),j(this.el).addClass("closing").delay(500).queue(function(){j(this).removeClass("active closing")}),j("#optinoid-floating-bar").length&&(j("#optinoid-floating-bar").addClass("active"),j("body").addClass("optinoid-fb-padding").css("padding-top",j("#optinoid-floating-bar").outerHeight())),j("body").hasClass("optinoid-welcome-padding")&&j("body").removeClass("optinoid-welcome-padding").css("padding-top",0),i&&jQuery.post(optinoid.api_url,{id:j(this.el).data("id"),action:"close_optinoid",security:optinoid.nonce})}};window.matchMedia||(window.matchMedia=function(){"use strict";var i=window.styleMedia||window.media;if(!i){var e=document.createElement("style"),t=document.getElementsByTagName("script")[0],o=null;e.type="text/css",e.id="matchmediajs-test",t.parentNode.insertBefore(e,t),o="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,i={matchMedium:function(i){var t="@media "+i+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=t:e.textContent=t,"1px"===o.width}}}return function(e){return{matches:i.matchMedium(e||"all"),media:e||"all"}}}()),j(document).ready(function($){Optinoid.init()});