function isEmail(e){var i=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return i.test(e)}!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var i=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=i,t}}}(function(){function e(){for(var e=0,i={};e<arguments.length;e++){var t=arguments[e];for(var o in t)i[o]=t[o]}return i}function i(t){function o(i,n,s){var a;if(arguments.length>1){if(s=e({path:"/"},o.defaults,s),"number"==typeof s.expires){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*s.expires),s.expires=d}try{a=JSON.stringify(n),/^[\{\[]/.test(a)&&(n=a)}catch(l){}return n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",n,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}i||(a={});for(var c=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,p=0;p<c.length;p++){var u=c[p].split("="),h=u[0].replace(r,decodeURIComponent),m=u.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=t&&t(m,h)||m.replace(r,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(l){}if(i===h){a=m;break}i||(a[h]=m)}catch(l){}}return a}return o.get=o.set=o,o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(i,t){o(i,"",e(t,{expires:-1}))},o.withConverter=i,o}return i()});var j=jQuery.noConflict(),Optinoid={isMobile:!1,el:null,type:"popup",win:null,cookies:[],init:function(){var e=this;this.cookies=Cookies.getJSON("optinoid-closed-optins"),window.matchMedia("(max-width: 768px)").matches&&(this.isMobile=!0),this.win=j(window),this.getOptins()},events:function(){var e=this;j(".optinoid-optin .close-optin").click(function(i){e.close(!0),i.preventDefault()}),j("#optinoid-overlay").click(function(i){i.target===this&&(e.close(!0),i.preventDefault())}),j(".optinoid-text").click(function(e){j("form",j(this).parent()).hasClass("active")?j("form",j(this).parent()).removeClass("active"):j("form",j(this).parent()).addClass("active")}),("welcomemat"==this.type||"welcomemat-fb"==this.type)&&(this.win.scroll(function(){j("#optinoid-welcome").hasClass("active")&&e.win.scrollTop()>e.win.height()&&e.close()}),this.win.resize(function(){j("#optinoid-welcome").height(e.win.height())}))},getOptins:function(){var e=this,i=this.isMobile?"mobile":"desktop";j(".optinoid-optin."+i).length&&j(".optinoid-optin."+i).each(function(){e.el=j(this),e.type=j(e.el).data("type");var i=j(e.el).data("id");return-1===j.inArray(i,e.cookies)?(e.formSubmit(),e.events(),e.open(),!1):void 0})},formSubmit:function(){var e=this;j(".optinoid-form").submit(function(i){0!==j("input[type=email]",this).val().length?(j("input[type=email]",this).removeClass("has-error"),j(this).closest(".optinoid-optin").append('<div class="preloader"><div class="circle"></div></div>'),jQuery.post(optinoid.api_url,j(this).serialize(),function(i){i.success&&i.success===!0&&(i.redirect===!0&&(window.location=i.url),e.close(!1))})):j("input[type=email]",this).addClass("has-error"),i.preventDefault()})},open:function(){var e=null,i=this;"popup"==this.type&&(e="#optinoid-overlay"),("welcomemat"==this.type||"welcomemat-fb"==this.type)&&(e="#optinoid-welcome"),"floating-bar"==this.type&&(e="#optinoid-floating-bar"),e&&j(e).delay(j(this.el).data("delay")).queue(function(){j(this).addClass("active").dequeue(),"#optinoid-welcome"==e&&j("body").addClass("optinoid-welcome-padding").css({"padding-top":i.win.height()}),"#optinoid-floating-bar"==e&&j(e).hasClass("optinoid-stick-top")&&j("body").addClass("optinoid-fb-padding").css("padding-top",j("#optinoid-floating-bar").outerHeight())}),j(this.el).delay(j(this.el).data("delay")).queue(function(){j(this).addClass("active").dequeue(),"#optinoid-welcome"==e&&(j(e).children(".content-over-split").length?j(e).append('<div class="optinoid-scroll split-screen"></div'):j(e).append('<div class="optinoid-scroll"></div'))}),jQuery.post(optinoid.api_url,{id:j(this.el).data("id"),action:"view_optinoid",security:optinoid.nonce})},close:function(e){j("#optinoid-welcome, #optinoid-overlay").addClass("closing").delay(500).queue(function(){j(this).removeClass("active closing").dequeue()}),j(this.el).addClass("closing").delay(500).queue(function(){j(this).removeClass("active closing")}),j("#optinoid-floating-bar").length&&(j("#optinoid-floating-bar").addClass("active"),j("body").addClass("optinoid-fb-padding").css("padding-top",j("#optinoid-floating-bar").outerHeight())),j("body").hasClass("optinoid-welcome-padding")&&j("body").removeClass("optinoid-welcome-padding").css("padding-top",0),e&&jQuery.post(optinoid.api_url,{id:j(this.el).data("id"),action:"close_optinoid",security:optinoid.nonce})}};window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var i=document.createElement("style"),t=document.getElementsByTagName("script")[0],o=null;i.type="text/css",i.id="matchmediajs-test",t.parentNode.insertBefore(i,t),o="getComputedStyle"in window&&window.getComputedStyle(i,null)||i.currentStyle,e={matchMedium:function(e){var t="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return i.styleSheet?i.styleSheet.cssText=t:i.textContent=t,"1px"===o.width}}}return function(i){return{matches:e.matchMedium(i||"all"),media:i||"all"}}}()),j(document).ready(function($){Optinoid.init()});